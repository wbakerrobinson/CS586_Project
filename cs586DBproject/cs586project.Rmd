---
title: "Capstone Survey Analysis"
author: "William Baker-Robinson and Kevin Ng"
date: "3/7/2020"
output:  
 html_document:
    theme: lumen
    toc: yes
    toc_float:
      collapsed: yes
      smooth_scroll: no
params:
  availSurv: NA
  projSurv: NA
  eligible: NA
  projInfo: NA
  host: NA
  dbName: NA
  username: NA
  password: NA
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r param vars for python}
host <- params$host
dbName <- params$dbName
username <- params$username
password <- params$password
```

```{python connect to database}
import psycopg2
import pandas

connected = True
dbData = False

try:
    conn = psycopg2.connect(
      dbname = r.dbName,
      user = r.username,
      host = r.host,
      password = r.password
    )
except:
    print("Unable to connect to database")
    connected = False
if(connected):
    cur = conn.cursor()
# CHECK IF STUDENT HAS DATA IN IT
if(student == True)
  dbData = True
```

```{r check user uploads and clean}
#check to see if the user uploaded any docs
userData <- FALSE
availSurv <- FALSE
projSurv <- FALSE
eligible <- FALSE
projInfo <- FALSE
if(py$connected == TRUE){
  # check avail surv
    # if true clean
    # set to true
  # check proj surv
    # if true clean
    # set to true
  # check eligible
    # if true clean
    # set to true
  # check projInfo
    # if true clean
    # set to true
  userData <- TRUE
}
```

```{python update or upload}
canQuery = False

if (connected == True and r.userData == True and dbData == False):
  # run ddl 
  # upload all...
  canQuery = True
# elif (connected == True and r.userData == True and dbData == True):
  #Will create if have time
    #find where new data starts in student avail
    #assumption is that only the survey 1 & 2 data will be uploaded and updated like this
    #compare new section to prev to check for duplicate stu id
    # keep track of all id which are duplicated
    # update info for duplicated
    # load the rest to DB
  #canQuery = True
elif (connected == True and r.userData == False and dbData == True):
  canQuery = True  
else:
  print("Not connected")
```
# 20 Questions  

## Interst Level  

## Availability  

## Skill Level  

## Eligibility  

### When are most students available?  

### What are the most common skills?  

### Where do skills not match with eligibility criteria?  

### List students based on project of interest:  

### Count the number of students interested in each project:  

### Which project garnered the least amount of interest?  

### Which student left the most additional comments?  

### What proportion of students are available past 6:00 Pm?  

### What proportion of students perfer times before 8:00 Am?

### What are some of the least common skills?  

### Of the students who expressed at least moderate interest in over half the projects, what percentage of them also expressed at least moderate confidence in their skill?   

### Are there more students who marked low interest in all projects than students who marked high interest in all projects?  

### What is the most common skill among those who got straight Aâ€™s in their prerequisite courses?  

### Is the proportion of solo workers who responded to the prompt regarding anything else to know about them greater than or less than the proportion of non-solo workers who responded?  

### What is the average amount of interest for project 3?  

### What is the minimum number of time slot availabilities of any student?  

### Which students have preferred times that are not available times?  

### Is there at least one pair of students where each student has similar degrees of interest in a project and where a subject that one student feels the most knowledgeable about is the same subject that the other student feels the least knowledgeable about? 

### How many students listed more than 5 skills or subjects that interest them the most?  

### How many students share a favorite programming language with another student who expresses the same confidence level for at least one project?  

```{python}
if(connected):
  conn.close()
```

